{"version":3,"file":"background.js","mappings":";;;;;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://summarizer/./src/background/index.js"],"sourcesContent":["let lastMessage = null;\r\nlet activeTabId = null;\r\n\r\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\r\n  if (request.message === \"textSelected\") {\r\n    lastMessage = request;\r\n    activeTabId = sender.tab.id;\r\n    console.log(lastMessage, activeTabId);\r\n  }\r\n});\r\n\r\nchrome.tabs.onActivated.addListener((activeInfo) => {\r\n  activeTabId = activeInfo.tabId;\r\n});\r\nchrome.runtime.onConnect.addListener((port) => {\r\n  if (port.name === \"overlay\") {\r\n    console.log(port, \"port\");\r\n    port.onMessage.addListener((request) => {\r\n      if (request.message === \"fetchLastMessage\") {\r\n        console.log(\"sending last message\");\r\n        port.postMessage(lastMessage);\r\n      }\r\n    });\r\n\r\n    chrome.tabs.onUpdated.addListener(function listener(tabId, changeInfo) {\r\n      if (tabId === activeTabId && changeInfo.status === \"complete\") {\r\n        console.log(\"sending last message\");\r\n        port.postMessage(lastMessage);\r\n      }\r\n    });\r\n  }\r\n});\r\n"],"names":[],"sourceRoot":""}